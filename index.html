<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Lam</title><meta name="keywords" content="blog"><meta name="author" content="xiaoLam"><meta name="copyright" content="xiaoLam"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="记录常见问题, 分享学习笔记">
<meta property="og:type" content="website">
<meta property="og:title" content="Lam">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Lam">
<meta property="og:description" content="记录常见问题, 分享学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/sunlogo1.jpg">
<meta property="article:author" content="xiaoLam">
<meta property="article:tag" content="blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/sunlogo1.jpg"><link rel="shortcut icon" href="/img/Sun.png"><link rel="canonical" href="http://example.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-right"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Lam',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-05-26 21:40:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/myCss.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/loading.gif" data-original="/img/sunlogo1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/myself/"><i class="fa-fw fa fa-id-card"></i><span> myself</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://i.loli.net/2021/05/19/Ycwx5ieDVLFCm3T.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lam</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/myself/"><i class="fa-fw fa fa-id-card"></i><span> myself</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Lam</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/xiaoLam" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/26/%E8%AE%A4%E8%AF%86token%E9%AA%8C%E8%AF%81/" title="认识token验证">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/IZ8Yb2diaRckT3p.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识token验证"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/%E8%AE%A4%E8%AF%86token%E9%AA%8C%E8%AF%81/" title="认识token验证">认识token验证</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:39:13.000Z" title="发表于 2021-05-26 21:39:13">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/">前端小知识</a></span></div><div class="content">认识token
cookie和session的方式有很多的缺点
cookie会被附加在每一个HTTP请求中, 即是这个HTTP请求不需要cookie, 所以无形中增加了流量
cookie是使用明文传递的,所以存在安全性问题, session可以解决这个问题,但是session也是可以自行使用base64解密的, 除非使用加严操作
cookie的大小限制是4kb, 所以对于复杂的需求来说是不够用的
对于浏览器外的其他客户端, 比如安卓和IOS, 必须手动地设置cookie和session
对于分布式系统和服务器集群中想要正确地解析session是比较困难的
token解决这个问题的方式为, 只有一台服务器拥有私钥和颁发token的权限, 而其他服务器拥有公钥和解析token的权限, 以此方便地解析token


所以在目前的前后端分离开发过程中, 使用token来进行身份验证是最多的情况
token可以翻译为令牌
也就是在验证了用户账号和密码正确的情况下, 给用户颁发一个令牌
这个令牌作为后续用户访问一些接口或者资源的凭证
我们可以根据这个凭证来判断用户是否有权限来访问


所以toke ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/26/cookie%E5%92%8Csession/" title="cookie和session">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/cWZehC6AKD47tnl.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cookie和session"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/cookie%E5%92%8Csession/" title="cookie和session">cookie和session</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:37:32.000Z" title="发表于 2021-05-26 21:37:32">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/">前端小知识</a></span></div><div class="content">登陆凭证
为什么需要登陆凭证呢?
在Web开发中, 使用最多的协议式http协议, 但是http协议是一个无状态协议


什么式无状态协议?
比如说, 我们登陆了一个网站, 在登陆的时候需要输入用户名和密码
登陆成功后, 我们以用户的身份访问其他数据和资源, 还是通过http请求去访问的
但是对于服务器来说, 每一次请求都是一个单独的请求, 和之前的请求没有任何关系, 所以服务器不会认可我们的用户身份
这个就是http的无状态, 也就是服务器不知道你上一步做了什么, 所以我们需要由登陆凭证



认识cookie
Cookie(复数形态Cookies), 又称为”小甜饼”, 类型为”小型文本文件”, 某些网站为了辨别用户身份而存储在用户本地终端(Client Side)上的数据
浏览器会在特定的情况下携带上cookie来发送请求, 我们可以通过cookie来获取到一些信息


Cookie总是保存至客户端中, 按照在客户端中的存储位置, Cookie可以分为内存Cookie和硬盘Cookie
内存Cookie由浏览器维护, 保存至内存中, 浏览器关闭的时候Cookie就会消失, 其存在 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/26/%E8%AE%A4%E8%AF%86ORM/" title="认识ORM">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/OqZ1VjEHG4kSNoW.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识ORM"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/%E8%AE%A4%E8%AF%86ORM/" title="认识ORM">认识ORM</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:36:39.000Z" title="发表于 2021-05-26 21:36:39">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/">前端小知识</a></span></div><div class="content">认识ROM
对象关系映射(英语: Object Relational Mapping), 简称ORM, 或者O/RM mapping, 是一种程序设计的方法
从效果来讲, 它提供了一个可在编程语言中, 使用虚拟对象数据库的效果
比如在Java开发中经常使用的ORM包括: Hibernate, MyBatis


Node当中的ORM我们通常使用的是sequelize
sequelize是用于Postgres, MySQL, MariaDB, SQLite和Microsoft SQL Server的基于Node.js的ORM


如果我们希望讲Sequelize和MySQL一起使用, 那么我们需要先安装两个东西
mysql2: sequelize在操作mysql是使用的是mysql2
sequelize: 使用它来让对象映射到表中



Sequelize的使用
Sequelize连接数据库
第一步: 创建一个Sequelize的对象, 并且指定数据库 用户名 密码 数据库类型 主机地址等
第二步: 使用authenticate方法来连接数据库



const &#123;  Sequ ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/26/%E8%AE%A4%E8%AF%86Buffer/" title="认识Buffer">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/uts8aj6i3kdg5D7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识Buffer"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/%E8%AE%A4%E8%AF%86Buffer/" title="认识Buffer">认识Buffer</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:35:51.000Z" title="发表于 2021-05-26 21:35:51">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/">前端小知识</a></span></div><div class="content">数据的二进制
计算机中所有的内容: 文字, 数字, 图片, 音频, 视频最终都是通过二进制进行表示的
JavaScript可以直接去处理非常直观的数据: 比如字符串, 通常展示出来的也是这些字符串内容
JavaScript是不可以处理图片的
事实上在网页端, 图片是交友浏览器处理的
JavaScript或者HTML只是负责将这个图片的地址告诉给浏览器
浏览器负责根据这个图片地址, 渲染出这个图片


一般来说, 在前端是不需要处理图片的
但是对于服务器端来说就不一样了
服务器端要处理的本地文件类型相对较多
比如保存文本的文件并不是使用UTF-8进行编码的, 而是使用GBK, 那么我们必须读取到其二进制数据, 再通过GBK转换成对应的文字
比如我们需要读取的是一张图片的数据(二进制), 再通过某些手段对图片数据进行二次的处理(裁剪, 格式转换, 旋转, 添加滤镜), Node中有一个Sharp的库, 可以读取图片或者对传入图片的Buffer进行处理
比如Node中通过TCP建立长链接, TCP传输的是字节流, 我们需要将图片数据转换为字节再进行传输, 并且需要知道传输字节的大小(客服端需 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/26/NPM%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E8%AF%A6%E8%A7%A3/" title="NPM包管理工具详解">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/knaVAz9IfvwGrPc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NPM包管理工具详解"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/NPM%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E8%AF%A6%E8%A7%A3/" title="NPM包管理工具详解">NPM包管理工具详解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:34:06.000Z" title="发表于 2021-05-26 21:34:06">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/">前端小知识</a></span></div><div class="content">如何共享代码
JavaScript中可以通过模块化的方式将代码划分为一个个小的结构
在以后的开发中就可以通过模块化的方式来封装自己的代码, 并且封装成一个工具
这个工具我们可以让别人通过导入的方式来使用, 甚至分享给全世界的任何人


如何共享我们的代码呢?
方式一: 上传到github中, 让其他程序员通过github下载然后手动地引用
缺点是别人必须知道我们代码地github地址, 并且从github上手动地下载下来
在项目中需要手动地引用, 并且管理相关的依赖
不需要使用的时候, 需要手动地删除相关的依赖
当遇到版本升级或者切换的时候, 需要重复上面的操作
显然, 这种方法很麻烦, 并且容易出错


方式二: 使用一个专业的工具来管理我们的代码
我们通过工具将代码发布到特定的位置
让其他人直接通过这个工具来安装, 升级, 删除, 管理我们的工具代码



包管理工具npm
显然, 通过第二种方式我们可以更好地管理自己的工具包, 其他人也可以更好地使用我们的工具包
包管理工具npm
Node package manager, Node包管理器
目前已经不仅仅是Node包管理器了,  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/26/JavaScript%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83/" title="JavaScript的模块化规范">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/uts8aj6i3kdg5D7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript的模块化规范"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/JavaScript%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83/" title="JavaScript的模块化规范">JavaScript的模块化规范</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:32:24.000Z" title="发表于 2021-05-26 21:32:24">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/">前端小知识</a></span></div><div class="content">什么是模块化
什么是模块化开发?

事实上模块化开发最终的目的是将程序划分为一个个小的结构
这个结构中编写属于本身的逻辑代码, 有自己的作用域, 不会影响到其他的结构
这个结构可以将自己希望暴露的变量, 函数, 对象等导出, 供给其他结构使用
也可以通过某种方式, 导入其他结构中的变量, 函数, 对象等


以上说到的结构, 就是模块; 按照这种结构划分开发程序的过程, 就是模块化开发的过程


早期的JavaScript
早期的JavaScript有很多的缺陷
var定义的变量作用域问题;
这个问题在ES6后, 通过使用let 和 const定义变量就解决了这个问题


JavaScript的面向对象并不能像常规面向对象语言一样使用class
这个问题也在ES6后, 通过class关键字解决了


JavaScript没有模块化
这个问题在ES6后, 也得到了完善




现在的JavaScript的最紧急的问题是, 没有静态类型检测, 这也是为什么TypeScript发展起来的原因之一
在网页开发的早期, Brendan Eich开发的JavaScript只是作为一种脚本语言, 做 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/26/mySQL2%E5%9F%BA%E7%A1%80/" title="mySQL2基础">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/OqZ1VjEHG4kSNoW.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mySQL2基础"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/mySQL2%E5%9F%BA%E7%A1%80/" title="mySQL2基础">mySQL2基础</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:31:14.000Z" title="发表于 2021-05-26 21:31:14">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/mySQL/">mySQL</a></span></div><div class="content">认识mysql2
前面我们所有的操作都是在GUI工具中, 通过SQL语句来获取结果的,真实开发中肯定是通过代码来完成所有的操作的
如何在Node的代码中执行SQL语句呢? 这里我们可以借助于两个库
mysql: 最早的Node连接MySQL的数据库驱动
mysql2: 在mysql的基础之上, 进行了很多的优化 改进


目前来说, 建议使用mysql2, 因为mysql2兼容了mysql的API, 并且提供了一些附加功能
更快更好的性能
Prepared Statement(预编译语句)
提高性能: 将创建的语句模块发送个MySQL, 然后MySQL编译(解析, 优化, 转换)语句模块, 并且存储它但是不执行, 之后我们在真正执行的时候会给MySQL提供实际的参数才会执行; 就算多次执行, 也只会编译一次, 所以性能是更好的
支持Promise. 所以可以使用async和await语法
等等





使用mysql2
安装mysql2
npm install mysql2


mysql2的基本使用过程如下:
第一步: 创建链接(通过createConection), 并且获取连接 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/26/mySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC/" title="mySQL数据库基本">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/knaVAz9IfvwGrPc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mySQL数据库基本"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/mySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC/" title="mySQL数据库基本">mySQL数据库基本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:29:01.000Z" title="发表于 2021-05-26 21:29:01">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/mySQL/">mySQL</a></span></div><div class="content">为什么需要数据库
任何软件系统都需要存放大量的数据, 这些数据通常都是非常复杂和庞大的
比如用户信息包括姓名、年龄、性别、地址
比如商品信息包括商品名称、描述、价格、分类标签、商品图片等
比如歌曲信息包括歌曲名称、歌手、专辑、歌曲时长、歌词、封面等


这些信息如果直接存储到文件系统中可以吗？可以，但是文件系统有很多缺点
很难以合适的方式组织数据(多张表之前的关系合理组织)
并且对数据进行增删改查中的复杂操作(虽然一些简单确实可以), 并且保证操作的原子性
很难实现数据共享, 比如一个数据库需要为多个程序服务
需要考虑如何进行数据的高效备份 迁移 恢复


数据库通俗来说就是一个存储数据的仓库, 本质上就是一个软件 一个程序

常见的数据库有哪些
通常我们将数据库划分为两类: 关系型数据库和非关系型数据库
关系型数据库: MySQL、Qracle、DB2、SQL Server、Postgre SQL等
关系型数据库通常我们会创建很多个二维数据表
数据表之间相互关联起来, 形成一对一 一对多 多对多等关系
之后可以利用SQL语句再多张表中查询我们所需的数据
支持事务, 对数据的访问更加的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/26/10-Node%E4%B8%ADexpress%E5%92%8Ckoa%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/" title="10-Node中express和koa框架对比">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/zMEAHhVxbYdFLqt.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="10-Node中express和koa框架对比"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/10-Node%E4%B8%ADexpress%E5%92%8Ckoa%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94/" title="10-Node中express和koa框架对比">10-Node中express和koa框架对比</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:26:44.000Z" title="发表于 2021-05-26 21:26:44">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Node/">Node</a></span></div><div class="content">koa和express的对比
从架构设计上来说
express是完整的强大的, 其帮助我们内置了很多好用的功能
koa是简洁的自由的, 只包含最核心的功能, 并不会对我们使用其他中间件进行任何的闲置
甚至是app中最基本的get、post方法过滤都没有提供
我们需要通过自己或者路由来判断请求方式或者使用第三方库来实现其他功能




因为express和koa框架它们的核心其实是中间件
但是它们的中间件的执行机制是不一样的， 特别是针对某一个中间件包含异步操作的时候


express中执行中间件只使用了简单的函数来执行中间件
而koa中执行中间件利用了promise对象来实现的
所以koa中可以使用async await来处理中间件中的异步操作， 而express中不能

</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/26/09-Node%E7%9A%84Koa%E6%A1%86%E6%9E%B6/" title="09-Node的Koa框架">     <img class="post_bg" src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/zMEAHhVxbYdFLqt.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="09-Node的Koa框架"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/26/09-Node%E7%9A%84Koa%E6%A1%86%E6%9E%B6/" title="09-Node的Koa框架">09-Node的Koa框架</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-26T13:25:46.000Z" title="发表于 2021-05-26 21:25:46">2021-05-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Node/">Node</a></span></div><div class="content">认识koa
前面我们已经学习了expresss, 另外一个非常流行的Node Web服务器框架就是koa
koa官方的介绍
koa: next generation web framework for node.js
koa: node.js的下一代web框架


事实上, koa是express同一个团队开发的一个新的Web框架
目前团队的核心开发中TJ的主要精力也在维护Koa, express已经交给团队维护了
koa旨在为Web应用程序和API提供更小, 更丰富和更强大的能力
相对于express具有更强的异步处理能力
koa的核心代码只有1600+行, 是一个更加轻量级的框架, 我们可以根据需要安装和使用中间件



Koa初体验
koa注册中间件提供了两个参数
ctx: 上下文(context)对象
koa并没有像express一样, 将req和res分开, 而是将它们作为ctx的属性
ctx代表一次请求的上下文对象
ctx.request: 获取请求对象
ctx.response: 获取响应对象


next: 本质是一个dispatch, 类似于express的next
 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/loading.gif" data-original="/img/sunlogo1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">xiaoLam</div><div class="author-info__description">记录常见问题, 分享学习笔记</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xiaoLam"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xiaoLam" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">博客建设中...</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/05/26/%E8%AE%A4%E8%AF%86token%E9%AA%8C%E8%AF%81/" title="认识token验证"><img src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/IZ8Yb2diaRckT3p.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识token验证"/></a><div class="content"><a class="title" href="/2021/05/26/%E8%AE%A4%E8%AF%86token%E9%AA%8C%E8%AF%81/" title="认识token验证">认识token验证</a><time datetime="2021-05-26T13:39:13.000Z" title="发表于 2021-05-26 21:39:13">2021-05-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/26/cookie%E5%92%8Csession/" title="cookie和session"><img src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/cWZehC6AKD47tnl.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cookie和session"/></a><div class="content"><a class="title" href="/2021/05/26/cookie%E5%92%8Csession/" title="cookie和session">cookie和session</a><time datetime="2021-05-26T13:37:32.000Z" title="发表于 2021-05-26 21:37:32">2021-05-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/26/%E8%AE%A4%E8%AF%86ORM/" title="认识ORM"><img src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/OqZ1VjEHG4kSNoW.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识ORM"/></a><div class="content"><a class="title" href="/2021/05/26/%E8%AE%A4%E8%AF%86ORM/" title="认识ORM">认识ORM</a><time datetime="2021-05-26T13:36:39.000Z" title="发表于 2021-05-26 21:36:39">2021-05-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/26/%E8%AE%A4%E8%AF%86Buffer/" title="认识Buffer"><img src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/uts8aj6i3kdg5D7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="认识Buffer"/></a><div class="content"><a class="title" href="/2021/05/26/%E8%AE%A4%E8%AF%86Buffer/" title="认识Buffer">认识Buffer</a><time datetime="2021-05-26T13:35:51.000Z" title="发表于 2021-05-26 21:35:51">2021-05-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/26/NPM%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E8%AF%A6%E8%A7%A3/" title="NPM包管理工具详解"><img src="/img/loading.gif" data-original="https://i.loli.net/2021/05/19/knaVAz9IfvwGrPc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NPM包管理工具详解"/></a><div class="content"><a class="title" href="/2021/05/26/NPM%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E8%AF%A6%E8%A7%A3/" title="NPM包管理工具详解">NPM包管理工具详解</a><time datetime="2021-05-26T13:34:06.000Z" title="发表于 2021-05-26 21:34:06">2021-05-26</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Node/"><span class="card-category-list-name">Node</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Vue/"><span class="card-category-list-name">Vue</span><span class="card-category-list-count">15</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/mySQL/"><span class="card-category-list-name">mySQL</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/"><span class="card-category-list-name">前端小知识</span><span class="card-category-list-count">9</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Buffer/" style="font-size: 1.1em; color: #999">Buffer</a> <a href="/tags/ES6/" style="font-size: 1.1em; color: #999">ES6</a> <a href="/tags/JS%E6%A8%A1%E5%9D%97%E5%8C%96/" style="font-size: 1.2em; color: #999da3">JS模块化</a> <a href="/tags/Node/" style="font-size: 1.4em; color: #99a5b6">Node</a> <a href="/tags/ORM/" style="font-size: 1.1em; color: #999">ORM</a> <a href="/tags/Vue/" style="font-size: 1.5em; color: #99a9bf">Vue</a> <a href="/tags/cookie%E5%92%8Csession/" style="font-size: 1.1em; color: #999">cookie和session</a> <a href="/tags/express/" style="font-size: 1.2em; color: #999da3">express</a> <a href="/tags/koa/" style="font-size: 1.2em; color: #999da3">koa</a> <a href="/tags/mySQL/" style="font-size: 1.2em; color: #999da3">mySQL</a> <a href="/tags/token%E9%AA%8C%E8%AF%81/" style="font-size: 1.1em; color: #999">token验证</a> <a href="/tags/webpack/" style="font-size: 1.1em; color: #999">webpack</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%9F%A5%E8%AF%86/" style="font-size: 1.3em; color: #99a1ac">前端小知识</a> <a href="/tags/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" style="font-size: 1.1em; color: #999">包管理工具</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" style="font-size: 1.1em; color: #999">数据存储</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">36</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">36</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-05-10T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-05-26T13:40:12.890Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By xiaoLam</div><div class="footer_custom_text">愿太阳与你同在</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "PRAISE THE SUN,LONG MAY THE SUN SHINE".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = 'PRAISE THE SUN'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="//code.tidio.co/mxoehjwwsedfngoj3ixfix9az25z37vc.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>